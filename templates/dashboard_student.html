{% extends "base.html" %}
{% block title %}Dashboard ¬∑ –°—Ç—É–¥–µ–Ω—Ç{% endblock %}

{% block content %}
<style>
  :root{
    --grad-1: linear-gradient(135deg,#6a11cb 0%,#2575fc 100%);
    --grad-2: linear-gradient(135deg,#00c6ff 0%,#0072ff 100%);
    --grad-3: linear-gradient(135deg,#f7971e 0%,#ffd200 100%);
    --grad-4: linear-gradient(135deg,#11998e 0%,#38ef7d 100%);
  }
  .hero{
    background: var(--grad-1); color:#fff; border-radius:18px; padding:24px 28px;
    box-shadow:0 14px 30px rgba(37,117,252,.25);
  }
  .stat-card{
    border:0; border-radius:16px; color:#fff; overflow:hidden;
    box-shadow:0 12px 28px rgba(0,0,0,.12);
  }
  .stat-card .card-body{padding:18px 18px 16px}
  .stat-card h2{font-weight:800; margin:0}
  .hover-lift{transition:transform .15s ease, box-shadow .15s ease}
  .hover-lift:hover{transform:translateY(-2px); box-shadow:0 16px 34px rgba(0,0,0,.12)}
  .list-clean .list-group-item{border:0; padding:.6rem .75rem}
</style>

<div class="hero mb-4">
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
    <div>
      <h2 class="mb-1">–î–æ–±—Ä–µ–¥–æ—ò–¥–µ, {{ user_name }} üëã</h2>
      <div class="opacity-75">–°—Ç—É–¥–µ–Ω—Ç—Å–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–Ω–∞ —Ç–∞–±–ª–∞ ¬∑ –±—Ä–∑ –ø—Ä–∏—Å—Ç–∞–ø –¥–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—ò–∞, –µ–ª–µ–º–µ–Ω—Ç–∏ –∏ —Ç–≤–æ–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
    </div>
    <div>
      <a href="/laboratory" class="btn btn-light btn-lg fw-semibold shadow-sm">
        ‚öóÔ∏è –û—Ç–≤–æ—Ä–∏ –≤–∏—Ä—Ç—É–µ–ª–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—ò–∞
      </a>
    </div>
  </div>
</div>

<!-- STAT cards -->
<div class="row g-3 mb-4">
  <div class="col-6 col-lg-3">
    <div class="card stat-card hover-lift" style="background:var(--grad-2)">
      <div class="card-body">
        <div class="small opacity-75">–ú–æ–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏</div>
        <h2 class="count-up" data-target="{{ stats.experiment_count or 0 }}">0</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-lg-3">
    <div class="card stat-card hover-lift" style="background:var(--grad-4)">
      <div class="card-body">
        <div class="small opacity-75">–†–∞–∑–ª–∏—á–Ω–∏ —Ä–µ–∞–∫—Ü–∏–∏</div>
        <h2 class="count-up" data-target="{{ stats.reaction_count or 0 }}">0</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-lg-3">
    <div class="card stat-card hover-lift" style="background:var(--grad-3)">
      <div class="card-body">
        <div class="small opacity-75">–ü—Ä–µ–≥–ª–µ–¥–∞–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏</div>
        <h2 class="count-up" data-target="{{ stats.element_count or 0 }}">0</h2>
      </div>
    </div>
  </div>
  <div class="col-6 col-lg-3">
    <div class="card stat-card hover-lift" style="background:linear-gradient(135deg,#ff512f,#dd2476)">
      <div class="card-body">
        <div class="small opacity-75">–ü—Ä–µ–≥–ª–µ–¥–∞–Ω–∞ –æ–ø—Ä–µ–º–∞</div>
        <h2 class="count-up" data-target="{{ stats.equipment_count or 0 }}">0</h2>
      </div>
    </div>
  </div>
</div>
<br>
<br>
<!-- Quick sections -->
<div class="row g-3">
  <div class="col-lg-4">
    <div class="card h-100 hover-lift">
      <div class="card-header bg-primary text-white"><i class="bi bi-flask"></i> –•–µ–º–∏—Å–∫–∏ –µ–ª–µ–º–µ–Ω—Ç–∏</div>
      <div class="card-body">
        <p>–ò—Å—Ç—Ä–∞–∂–∏ —Å–≤–æ—ò—Å—Ç–≤–∞ –∏ –±–µ–∑–±–µ–¥–Ω–æ—Å–Ω–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
        <a href="/elements" class="btn btn-primary">–ü—Ä–µ–≥–ª–µ–¥–∞—ò –µ–ª–µ–º–µ–Ω—Ç–∏</a>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card h-100 hover-lift">
      <div class="card-header bg-success text-white"><i class="bi bi-tools"></i> –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—Å–∫–∞ –æ–ø—Ä–µ–º–∞</div>
      <div class="card-body">
        <p>–ü—Ä–æ–≤–µ—Ä–∏ —É–ø–∞—Ç—Å—Ç–≤–∞ –∏ –±–µ–∑–±–µ–¥–Ω–æ—Å–Ω–∏ –ø—Ä–µ–ø–æ—Ä–∞–∫–∏.</p>
        <a href="/equipment" class="btn btn-success">–ü—Ä–µ–≥–ª–µ–¥–∞—ò –æ–ø—Ä–µ–º–∞</a>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card h-100 hover-lift">
      <div class="card-header bg-danger text-white"><i class="bi bi-radioactive"></i> –í–∏—Ä—Ç—É–µ–ª–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—ò–∞</div>
      <div class="card-body">
        <p>–í–ª–µ—á–∏ 2 –µ–ª–µ–º–µ–Ω—Ç–∏ –∏ —Å–∏–º—É–ª–∏—Ä–∞—ò —Ä–µ–∞–∫—Ü–∏—ò–∞.</p>
        <a href="/laboratory" class="btn btn-danger">–û—Ç–≤–æ—Ä–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—ò–∞</a>
      </div>
    </div>
  </div>
</div>
<br>
<br>
<div class="row g-3 mt-1">
  <div class="col-lg-6">
    <div class="card h-100 hover-lift">
      <div class="card-header bg-warning text-dark"><i class="bi bi-journal-text"></i> –ú–æ–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏</div>
      <div class="card-body">
        <p>–ò—Å—Ç–æ—Ä–∏—ò–∞ –Ω–∞ —É—á–µ—Å—Ç–≤–∞ –∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ–¥ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏.</p>
        <a href="/my-experiments" class="btn btn-warning">–û—Ç–≤–æ—Ä–∏ –ª–∏—Å—Ç–∞</a>
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="card h-100 hover-lift">
      <div class="card-header text-white" style="background:linear-gradient(135deg,#667eea,#764ba2)"><i class="bi bi-graph-up"></i> –ú–æ—ò –Ω–∞–ø—Ä–µ–¥–æ–∫</div>
      <div class="card-body">
        <ul class="list-group list-clean">
          <li class="list-group-item"><i class="bi bi-check-circle text-success me-1"></i> –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏: <b>{{ stats.experiment_count or 0 }}</b></li>
          <li class="list-group-item"><i class="bi bi-check-circle text-success me-1"></i> –†–µ–∞–∫—Ü–∏–∏: <b>{{ stats.reaction_count or 0 }}</b></li>
          <li class="list-group-item"><i class="bi bi-check-circle text-success me-1"></i> –ï–ª–µ–º–µ–Ω—Ç–∏ –≤–∏–¥–µ–Ω–∏: <b>{{ stats.element_count or 0 }}</b></li>
        </ul>
        <a href="/my-experiments" class="btn btn-outline-light mt-2">–í–∏–¥–∏ –¥–µ—Ç–∞–ª–Ω–æ</a>
      </div>
    </div>
  </div>
</div>

<script>
// –º–∞–ª ‚Äûcount-up‚Äú –µ—Ñ–µ–∫—Ç –∑–∞ –±—Ä–æ—ò–∫–∏—Ç–µ
document.querySelectorAll('.count-up').forEach(el=>{
  const target = Number(el.dataset.target||0);
  const dur = 600; const start = performance.now();
  const step = t=>{
    const p = Math.min(1,(t-start)/dur);
    el.textContent = Math.round(target * p);
    if(p<1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
});
</script>
{% endblock %}
